{% extends "layout.html.twig" %}

{% block body_main %}
    <div id="layoutLoading"></div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>{{ 'account.name'|trans }}</th>
                <th>{{ 'account.username'|trans }}</th>
                <th>{{ 'account.password'|trans }}</th>
                <th></th>
                <th>{{ 'account.url'|trans }}</th>
                <th>{{ 'account.notes'|trans }}</th>
                <th>{{ 'account.rights'|trans }}</th>
            </tr>
        </thead>
        <tbody>
            {% for account in accounts %}
                {% if isAclGranted(constant('Scilone\\AclBundle\\Services\\AclUser::MASK_VIEW'), account) %}
                    <tr>
                        <td>{{ account.name }}</td>
                        <td>{{ account.userName }}</td>
                        <td>
                            <span class="fakePassword"><small>**********</small></span>
                            <span class="passwordHidden"
                                  data-password="{{ account.password|url_encode }}"
                                  data-salt="{{ account.salt }}"
                                  data-decrypt="0"
                            ></span>
                        </td>
                        <td>
                            <button type="button" class="btn btn-default btn-pass" aria-label="Left Align">
                                <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                            </button>
                            <!--button type="button" class="btn btn-default btn-copy" aria-label="Left Align">
                                <span class="glyphicon glyphicon-copy" aria-hidden="true"></span>
                            </button-->
                        </td>
                        <td>
                            <a href="{{ account.url }}" target="_blank" rel="noreferrer">
                                {{ account.url }}
                            </a>
                        </td>
                        <td>{{ account.notes }}</td>
                        <td>
                            <button type="button" class="btn btn-default" aria-label="Left Align">
                                <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                            </button>
                        </td>
                    </tr>
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
{% endblock body_main %}

{% block javascript %}
    {{ parent() }}

    {% javascripts
        '@ScilonePassManagerBundle/Resources/public/js/index.js'
        'assets/vendor/clipboard/dist/clipboard.min.js'
    %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock javascript %}

{% block stylesheets %}
    {{ parent() }}

    {% stylesheets '@ScilonePassManagerBundle/Resources/public/css/index.css' filter='cssrewrite' %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock stylesheets %}
